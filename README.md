The library provide smart helpers for standard operations integrated with PostgreSQL.

# Initialization

```javascript
require('@sharaal/sql-pg')(client)
```

# Examples

## SELECT

The return value is `result.rows` of the pg result object.

### All columns and single condition

```javascript
const rows = await client.select('table', { column: 'value' })

// text: SELECT "*" FROM "table" WHERE "column" = $1
// parameters: ['value']
```

### All columns and multiple conditions

```javascript
const rows = await client.select(
  'table',
  { columnA: 'valueA', columnB: 'valueB', columnC: 'valueC' }
)

// text: SELECT "*" FROM "table" WHERE "columnA" = $1 AND "columnB" = $2 AND "columnC" = $3
// parameters: ['valueA', 'valueB', 'valueC']
```

### Single column and single condition

```javascript
const rows = await client.select('table', ['column'], { column: 'value' })

// text: SELECT "column" FROM "table" WHERE "column" = $1
// parameters: ['value']
```

### Multiple columns and single condition

```javascript
const rows = await client.select(
  'table',
  ['columnA', 'columnB', 'columnC'],
  { column: 'value' }
)

// text: SELECT "columnA", "columnB", "columnC" FROM "table" WHERE "column" = $1
// parameters: ['value']
```

### Multiple columns and multiple conditions

```javascript
const rows = await client.select(
  'table',
  ['columnA', 'columnB', 'columnC'],
  { columnA: 'valueA', columnB: 'valueB', columnC: 'valueC' }
)

// text: SELECT "columnA", "columnB", "columnC" FROM "table" WHERE "columnA" = $1 AND "columnB" = $2 AND "columnC" = $3
// parameters: ['valueA', 'valueB', 'valueC']
```

## INSERT

The return value is the SERIAL generated by inserting the new row located in `result.rows[0][serialColumn = 'id']` of the pg result object.

### Single column with default "id" serial column

```javascript
const id = await client.insert('table', { column: 'value' })

// text: INSERT INTO "table" ("column") VALUES ($1) RETURNING "id"
// parameters: ['value']
```

### Multiple columns with default "id" serial column

```javascript
const id = await client.insert(
  'table',
  { columnA: 'valueA', columnB: 'valueB', columnC: 'valueC' }
)

// text: INSERT INTO "table" ("columnA", "columnB", "columnC") VALUES ($1, $2, $3) RETURNING "id"
// parameters: ['valueA', 'valueB', 'valueC']
```

### Single column with another serial column

```javascript
const example = await client.insert('table', { column: 'value' }, 'example')

// text: INSERT INTO "table" ("column") VALUES ($1) RETURNING "example"
// parameters: ['value']
```

### Multiple columns with another serial column

```javascript
const example = await client.insert(
  'table',
  { columnA: 'valueA', columnB: 'valueB', columnC: 'valueC' },
  'example'
)

// text: INSERT INTO "table" ("columnA", "columnB", "columnC") VALUES ($1, $2, $3) RETURNING "example"
// parameters: ['valueA', 'valueB', 'valueC']
```

## UPDATE

The return value is the count of the rows affected by the update located in `result.rowCount` of the pg result object.

### Single updates and single condition

```javascript
const rowCount = await client.update('table', { column: 'new value' }, { column: 'old value' })

// text: UPDATE "table" SET "column" = $1 WHERE "column" = $2 RETURNING "id"
// parameters: ['new value', 'old value']
```

### Multiple updates and single condition

```javascript
const rowCount = await client.update(
  'table',
  { columnA: 'new valueA', columnB: 'new valueB', columnC: 'new valueC' },
  { column: 'old value' }
)

// text: UPDATE "table" SET "columnA" = $1, "columnB" = $2, "columnC" = $3 WHERE "column" = $4 RETURNING "id"
// parameters: ['new valueA', 'new valueB', 'new valueC', 'old value']
```

### Multiple updates and multiple conditions

```javascript
const rowCount = await client.update(
  'table',
  { columnA: 'new valueA', columnB: 'new valueB', columnC: 'new valueC' },
  { columnA: 'old valueA', columnB: 'old valueB', columnC: 'old valueC' }
)

// text: UPDATE "table" SET "columnA" = $1, "columnB" = $2, "columnC" = $3 WHERE "columnA" = $4 AND "columnB" = $5 AND "columnC" = $6 RETURNING "id"
// parameters: [ 'new valueA', 'new valueB', 'new valueC', 'old valueA', 'old valueB', 'old valueC']
```

## DELETE

The return value is the count of the rows affected by the delete located in `result.rowCount` of the pg result object.

### Single condition

```javascript
const rowCount = await client.delete('table', { column: 'value' })

// text: DELETE FROM "table" WHERE "column" = $1
// parameters: ['value']
```

### Multiple conditions

```javascript
const rowCount = await client.delete(
  'table',
  { columnA: 'valueA', columnB: 'valueB', columnC: 'valueC' }
)

// text: DELETE FROM "table" WHERE "columnA" = $1 AND "columnB" = $2 AND "columnC" = $3
// parameters: ['valueA', 'valueB', 'valueC']
```
